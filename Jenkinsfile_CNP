#!groovy

@Library("Infrastructure")

def type = "ruby"
def product = "et-pet"
def component = "admin"

def yarnBuilder = new uk.gov.hmcts.contino.YarnBuilder(this)
def rubyBuilder = new uk.gov.hmcts.contino.RubyBuilder(this)

withPipeline(type, product, component) {
    env.RAILS_ENV = 'test'
    env.DB_HOST = 'localhost'
    env.DB_USER = 'postgres'
    env.DB_PORT = '5421'
    env.DB_PASSWORD = 'postgres'
    env.TEST_BROWSER = 'chrome_local'
    env.NODE_OPTIONS='--openssl-legacy-provider'

    before('test') {
        sh script:"""
            yarn install
        """, label: 'Yarn install'
    }
}
